# Hexxagon Go (NN Edition)

Hexxagon Go 是一款基于 Go 语言开发的六角棋（Hexxagon）对弈游戏。本项目已全面抛弃传统的静态评估函数，改用基于深度学习的神经网络（NN）作为核心评估引擎，实现了“大师级”的人机对战体验。

## 🎮 游戏简介

Hexxagon（中文译名：疯狂跳棋、征服六边形、水晶棋等）是一款规则简单但策略深奥的博弈游戏。棋手在 61 格（半径 4）的六角棋盘上移动棋子，通过“克隆”或“跳跃”来扩张领土并感染对方棋子。目标是在棋盘填满时占据更多格子。

## 📺 游戏演示

![Hexxagon Demo](demo_github.mp4)

## 📜 游戏规则

Hexxagon（疯狂跳棋）是一款规则简单但策略极深的博弈游戏。

### 1. 棋盘与棋子
- 棋盘由 61 个六角形格子组成（半径为 4 的六边形）。
- 双方各持一种颜色的棋子（红或白）。

### 2. 移动方式
玩家在自己的回合可以移动己方的一枚棋子，有两种移动方式：
- **克隆（分裂）**：移动到目标棋子 **相邻（1格距离）** 的空位。原位置棋子保留，目标位置增加一枚新棋子。
- **跳跃**：移动到目标棋子 **两格距离** 的空位。原位置棋子消失，棋子“跳跃”到目标位置。

### 3. 感染（转换）机制
- 当棋子落在目标位置后，该位置 **相邻（1格距离）** 的所有对方棋子都会立即变成我方的颜色。这是改变局势的核心手段。

### 4. 胜负判定
- 当棋盘被填满，或者任何一方都无法再移动时，游戏结束。
- 最终棋子数量多的一方获胜。

## 🧠 神经网络 AI 特性

本项目集成了一套先进的神经网络评估体系：
- **模型架构**：采用 KataGo V7 架构，支持 22 个空间特征平面和 19 个全局特征。
- **训练框架**：使用 [KataGomo-Hexxagon](https://github.com/hzyhhzy/KataGomo/tree/Hexxagon) 进行自对弈强化学习训练。
- **推理优化**：通过 ONNX Runtime 实现高效推理。
  - **Windows 平台**：支持 **TensorRT (显卡硬件加速)**、**CUDA** 和 **DirectML (微软 Direct12 接口，兼容性兜底)**。
  - **macOS/Linux**：支持 CoreML (macOS) 或 CUDA/CPU 推理。
- **混合搜索**：结合 Alpha-Beta 剪枝与神经网络评分，在极短的时间内即可达到超越顶尖人类棋手的棋力。

## 🚀 快速开始

### 运行环境
- **Windows (推荐)**: 
  - 显卡加速优先级：**TensorRT > CUDA > DirectML**。
  - 自动释放所需库文件（`onnxruntime.dll`, `DirectML.dll` 等），确保开箱即用。
- **macOS/Linux**: 自动适配 CoreML 或 CPU 推理。

### 启动命令
```powershell
# 人机对战 (默认深度 1，神经网络建议深度为 1 或 2)
./hexxagon.exe -depth 1

# 开启专业分析模式 (显示落子概率百分比 & 实时胜率)
./hexxagon.exe -depth 1 -tip

# 双人对战模式
./hexxagon.exe -mode pvp
```

## 📊 专业 UI 分析功能 ( `-tip` 参数)

启用 `-tip` 参数后，游戏界面将实时展示神经网络的思考过程：
- **实时胜率**：在左上角实时显示红白双方的获胜概率（Win %）。
- **落子概率提示**：选中棋子后，棋盘上会显示每个合法落点的 **Policy 概率百分比**。
- **热力显示**：数字颜色会根据概率高低动态变化，数值越大（概率越高）颜色越深。

## 🧮 性能优化

- **模型压缩**：支持 `.onnx.gz` 格式，在减小 EXE 体积的同时保持加载速度。
- **批量评估**：在搜索树中高效利用 GPU 吞吐量。
- **高效编码**：位板（Bitboard）驱动的走法生成。

## 📜 许可说明

- 本项目可免费用于学习、研究及非商业用途，使用时请注明仓库链接及作者信息。
- 严禁任何形式的商业使用（包括二次打包、付费分发或内嵌收费服务等）。
